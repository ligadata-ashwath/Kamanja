**Introduction**

This project contains a simple application that can be used by those that have some familiarity with the pmml source providers (e.g., R/Rattle, KNIME, RapidMiner, SAS) and consumers (KNIME, Zementis' Adapa).

This tool *does not* use Kamanja, but allows the user to quickly test their generated pmml model from their model development environment.

**Command Semantics**
  
Usage: org.kamanja.pmml.testtool.PmmlTestTool [options]
  Options:
  * --dataset
       CSV dataset file path
    --omitInputs
       if supplied, only emit target and output fields
       Default: false
    --output
       Output CSV file
       Default: stdout
  * --pmmlSrc
       PMML file path
    --separator
       CSV cell separator character
    --version
       print version and exit
       Default: false

The arguments are not unlike what one might use in the authoring tool (e.g., R/Rattle, RapidMiner, KNIME, etc.) to train your model.  Currently only CSV datasets are supported, which all has field names matching the DataField inputs in the model in its first line.  The delimiter can be changed to any of {"\t", ";", ","}. 

It will by default print the DataField inputs of your pmml model followed the target and any output fields that the model describes.  The inputs can be eliminated (score and outputs only) with the --omitInputs option.

You can optionally specify an output file path to collect your scores.  By default, however, it just prints to the stdout (your console) where you can redirect to a file or pipe to another process... perhaps comparing your expectations generated by the authoring tool with the results from the component that Kamanja utilizes.  See the examples in the **Sample Execution** section.

**Sample Execution**

export KAMANJA_SRCDIR=/path/to/your/kamanja/trunk
export LOG4J_HOME=$KAMANJA_SRCDIR/Utils/PmmlTestTool/src/main/resources
export ipport=8998
export KAMANJA_HOME=/path/to/your/kamanja/installation
cd $KAMANJA_SRCDIR

Running with java...
java -jar $KAMANJA_SRCDIR/Utils/PmmlTestTool/target/PmmlTestTool-1.0 --pmmlSrc $KAMANJA_SRCDIR/Utils/PmmlTestTool/src/main/resources/metadata/model/KNIME/DecisionTreeEnsembleIris.pmml --dataset $KAMANJA_SRCDIR/Utils/PmmlTestTool/src/main/resources/data/iris.raw.csv | wc -l

java -jar $KAMANJA_SRCDIR/Utils/PmmlTestTool/target/PmmlTestTool-1.0 --pmmlSrc $KAMANJA_SRCDIR/Utils/PmmlTestTool/src/main/resources/metadata/model/KNIME/DecisionTreeEnsembleIris.pmml --dataset $KAMANJA_SRCDIR/Utils/PmmlTestTool/src/main/resources/data/iris.raw.csv --omitInputs >/tmp/results.txt

Directly executing the fat jar...
$KAMANJA_SRCDIR/Utils/PmmlTestTool/target/PmmlTestTool-1.0 --pmmlSrc $KAMANJA_SRCDIR/Utils/PmmlTestTool/src/main/resources/metadata/model/KNIME/DecisionTreeEnsembleIris.pmml --dataset $KAMANJA_SRCDIR/Utils/PmmlTestTool/src/main/resources/data/iris.raw.csv | wc -l

$KAMANJA_SRCDIR/Utils/PmmlTestTool/target/PmmlTestTool-1.0 --pmmlSrc $KAMANJA_SRCDIR/Utils/PmmlTestTool/src/main/resources/metadata/model/KNIME/DecisionTreeEnsembleIris.pmml --dataset $KAMANJA_SRCDIR/Utils/PmmlTestTool/src/main/resources/data/iris.raw.csv --omitInputs >/tmp/results.txt

If you wish to debug the tool, try this and attach your debugger to the IP Port you specify. For example,

java -Xdebug -Xrunjdwp:transport=dt_socket,address="$ipport",server=y -Dlog4j.configurationFile=file:$KAMANJA_HOME/config/log4j2.xml -jar $KAMANJA_SRCDIR/Utils/PmmlTestTool/target/PmmlTestTool-1.0 --pmmlSrc $KAMANJA_SRCDIR/Utils/PmmlTestTool/src/main/resources/metadata/model/KNIME/DecisionTreeEnsembleIris.pmml --dataset $KAMANJA_SRCDIR/Utils/PmmlTestTool/src/main/resources/data/iris.raw.csv --omitInputs >/tmp/results.txt
